<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Amerikan Damasi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <style>
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes piece-glow {
            0%, 100% { 
                box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 25px rgba(255, 255, 255, 0.8);
                transform: scale(1.05);
            }
        }
        
        @keyframes valid-move-pulse {
            0%, 100% { 
                background-color: rgba(34, 197, 94, 0.4);
                transform: scale(1);
            }
            50% { 
                background-color: rgba(34, 197, 94, 0.6);
                transform: scale(1.02);
            }
        }
        
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        
        .cell {
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .cell-white {
            background-color: #f3f4f6;
            border: 1px solid #e5e7eb;
        }
        
        .cell-black {
            background-color: #374151;
            border: 1px solid #4b5563;
        }
        
        .piece {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
        }
        
        .piece-black {
            background: linear-gradient(135deg, #dc2626, #991b1b);
            color: white;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .piece-white {
            background: linear-gradient(135deg, #ffffff, #e5e7eb);
            color: #374151;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border: 3px solid #9ca3af;
        }
        
        .piece-king {
            border: 3px solid #fbbf24;
            box-shadow: 0 0 20px rgba(251, 191, 36, 0.6);
        }
        
        .piece-king-black {
            border: 3px solid #f59e0b;
        }
        
        .piece-king-white {
            border: 3px solid #fbbf24;
        }
        
        .selected {
            transform: scale(1.1);
            box-shadow: 0 0 25px rgba(59, 130, 246, 0.8);
            border: 3px solid #3b82f6 !important;
        }
        
        .valid-move {
            background-color: rgba(34, 197, 94, 0.4) !important;
            box-shadow: inset 0 0 20px rgba(34, 197, 94, 0.8);
            animation: valid-move-pulse 1s infinite ease-in-out;
        }
        
        .current-turn-piece {
            animation: piece-glow 2s infinite ease-in-out;
        }
        
        .button-red {
            background: linear-gradient(135deg, #dc2626, #991b1b);
        }
        
        .button-red:hover {
            background: linear-gradient(135deg, #b91c1c, #7f1d1d);
        }
        
        @media (max-width: 640px) {
            .cell {
                width: 40px;
                height: 40px;
            }
            
            .piece {
                width: 32px;
                height: 32px;
                font-size: 16px;
            }
        }
    </style>
</head>

<body class="bg-gray-900 text-white min-h-screen flex flex-col items-center justify-center p-2 font-inter overflow-x-hidden">

    <!-- Modal Mesaj Kutusu -->
    <div id="message-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4">
        <div class="bg-gray-800 text-white p-6 rounded-2xl shadow-2xl max-w-sm w-full transform transition-all duration-300 scale-100">
            <h3 class="text-xl font-bold mb-4 text-red-400">Bildiri≈ü</h3>
            <p id="modal-message" class="mb-6 text-gray-300"></p>
            <button id="modal-close-btn" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-lg transition-all duration-200">
                Baƒüla
            </button>
        </div>
    </div>

    <!-- Loading Ekranƒ± -->
    <div id="loader" class="text-center p-8 bg-gray-800 rounded-2xl shadow-xl max-w-sm w-full">
        <div class="animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-red-500 mx-auto mb-4"></div>
        <p class="text-lg font-semibold">Yuklenir...</p>
    </div>

    <!-- Ana Lobi Ekranƒ± -->
    <div id="main-lobby" class="hidden w-full max-w-md bg-gray-800 p-6 rounded-2xl shadow-2xl border border-gray-700">
        <h2 class="text-2xl sm:text-3xl font-bold text-center mb-8 text-red-400 animate-float">AMERIKAN DAMASI</h2>
        
        <div class="space-y-4">
            <button id="dereceli-btn" class="w-full button-red text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-xl text-lg">
                üèÜ Dereceli Oyna
            </button>
            
            <button id="friend-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-xl text-lg">
                üë• Arkada≈üla Oyna
            </button>
        </div>
    </div>

    <!-- Dereceli Arama Lobi -->
    <div id="ranked-lobby" class="hidden w-full max-w-md bg-gray-800 p-6 rounded-2xl shadow-2xl border border-gray-700">
        <h2 class="text-2xl sm:text-3xl font-bold text-center mb-6 text-red-400 animate-float">üèÜ Dereceli E≈üle≈üme</h2>
        <p id="ranked-status" class="text-center text-yellow-300 mb-8 font-semibold transition-all duration-300 text-lg">
            Raqib axtarilir...
        </p>
        
        <button id="cancel-ranked-btn" class="w-full bg-gray-600 hover:bg-gray-700 text-white font-bold py-4 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 shadow-xl">
            ‚ùå ƒ∞ptal Et
        </button>
    </div>

    <!-- Arkada≈ü Lobi -->
    <div id="friend-lobby" class="hidden w-full max-w-md bg-gray-800 p-6 rounded-2xl shadow-2xl border border-gray-700">
        <h2 class="text-2xl sm:text-3xl font-bold text-center mb-6 text-blue-400 animate-float">üë• Arkada≈üla Oyna</h2>
        
        <div class="space-y-4">
            <button id="create-room-btn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg">
                üè† Oda Yarat
            </button>
            
            <div class="bg-gray-700 p-4 rounded-lg">
                <div class="flex flex-col items-center space-y-2">
                    <span class="text-sm font-semibold text-gray-300">Oda Kodu:</span>
                    <span id="room-code-output" class="text-2xl font-mono text-green-400 bg-gray-900 px-4 py-2 rounded-lg shadow-inner select-all">...</span>
                    <button id="copy-code-btn" class="bg-green-600 hover:bg-green-700 text-white text-sm py-2 px-4 rounded-lg transition-all duration-200 transform hover:scale-105">
                        üìã Kopyala
                    </button>
                </div>
            </div>
            
            <div class="bg-gray-700 p-4 rounded-lg space-y-3">
                <input id="join-room-input" type="text" placeholder="Oda Kodu (4 Reqem)" maxlength="4" 
                    class="w-full p-3 rounded-lg border-2 border-gray-600 bg-gray-900 text-white placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500 text-center text-lg font-mono">
                <button id="join-room-btn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg">
                    üîó Odaya Baƒülan
                </button>
            </div>
        </div>
        
        <button id="back-to-main-btn" class="w-full mt-4 bg-gray-600 hover:bg-gray-700 text-white font-bold py-3 px-4 rounded-lg transition-all duration-200">
            üîô Ana Men√º
        </button>
    </div>

    <!-- Oyun Ekranƒ± -->
    <div id="game-screen" class="hidden w-full flex flex-col items-center max-w-2xl">
        
        <!-- N√∂vb…ô G√∂st…ôricisi -->
        <div id="current-turn-display" class="w-full max-w-md mb-4 p-4 rounded-xl bg-gray-800 shadow-xl text-center">
            <p class="text-lg sm:text-xl font-bold">Sƒ±ra: <span id="turn-text" class="text-yellow-400">Yuklenir...</span></p>
        </div>
        
        <!-- Oyun Tahtasƒ± -->
        <div id="board" class="grid grid-cols-8 gap-0 border-4 border-gray-700 rounded-lg overflow-hidden shadow-2xl bg-white">
            <!-- Tahta h√ºcrel…ôri JavaScript il…ô dinamik olaraq yaradƒ±lacaq -->
        </div>
        
        <!-- Oyun Kontrolleri -->
        <div class="mt-6 w-full max-w-md flex flex-col sm:flex-row gap-3">
            <button id="leave-game-btn" class="flex-1 bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105 shadow-lg">
                üö™ Oyundan √áƒ±x
            </button>
        </div>
    </div>

    <!-- Baƒülantƒ± Statusu -->
    <div class="fixed top-4 right-4 bg-gray-800 px-4 py-2 rounded-lg shadow-lg">
        <p id="connection-status" class="text-sm font-semibold">Server…ô qo≈üulur...</p>
    </div>

    <script src="game.js"></script>
</body>
</html>
